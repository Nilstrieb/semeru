{"version":3,"sources":["components/Menu.tsx","Task.ts","components/QuickTask.tsx","components/TimerPage.tsx","components/Settings.tsx","components/Stats.tsx","components/SignIn.tsx","components/SignUp.tsx","store/Store.ts","store/LocalStore.ts","store/CloudStore.ts","App.tsx","index.tsx"],"names":["Menu","changeLocale","locale","useContext","LocaleContext","user","UserContext","Navbar","collapseOnSelect","expand","Container","to","className","Toggle","Collapse","id","Nav","root","timerPage","settingsPage","dataPage","Col","Button","variant","onClick","firebase","auth","signOut","then","window","location","reload","catch","err","console","error","signIn","NavDropdown","title","languages","Item","en","de","totalCurrentTaskTime","task","breaks","map","br","end","start","reduce","a","b","currentBreakStart","Date","now","collectionToArray","collection","Object","values","timeForTasksSince","tasks","timeSince","results","Math","max","filter","forEach","name","time","add","totalTaskTime","entries","sort","QuickTask","highlight","handler","Timer","props","style","fontSize","TimerInner","useState","setRefresh","useEffect","i","setInterval","refresh","clearInterval","formatTime","seconds","minutes","hours","floor","toString","padStart","TimerPage","quickTasks","store","StoreContext","ErrorContext","setTask","quickTaskArray","listener","newTask","value","getCurrentTask","errors","removeListener","startHandler","stopHandler","input","prompt","timer","enterLastTaskName","namedTask","stop","addTask","cancelHandler","cancel","anyQuickTaskMatch","find","qt","Row","log","breakEnd","next","updateCurrentTask","breakName","enterBreakName","resume","pause","quickTask","Settings","upload","download","newQuickTask","settings","newTaskMessage","addQuickTask","xs","removeQuickTask","removeQuickTaskHandler","new","synchronizeTitle","syncExplain","fromCtoL","fromLtoC","deleteData","delete","mustBeLoggedIn","times","toTimestamp","date","setHours","getTime","weekDay","getDay","newDate","getDate","setDate","formatTimeText","Stats","groupedBy","setGroupedBy","setTasks","newTasks","getTasks","stats","ListGroup","ListGroupItem","SignIn","setError","history","useHistory","SignInSchema","useMemo","Yup","shape","email","notAnEmail","required","emailReq","password","passwordReq","firebaseErrors","userNotFound","incorrectPassword","formik","useFormik","initialValues","validationSchema","onSubmit","signInWithEmailAndPassword","push","code","validateOnChange","validateOnBlur","Form","e","preventDefault","handleSubmit","fieldName","Group","Label","Control","type","isInvalid","onChange","handleChange","Alert","show","noAccountYet","signUp","SignUp","SignUpSchema","passwordConfirm","min","passwordLength","oneOf","passwordMustMatch","emailAlreadyInUse","weakPassword","createUserWithEmailAndPassword","accountInfo","Store","this","set","Promise","all","get","LocalStore","_listeners","defaultValue","item","localStorage","getItem","JSON","parse","newValue","string","stringify","setItem","getOnce","toRemove","random","CloudStore","_user","_listenerMap","Map","firebaseListener","database","ref","path","off","val","data","on","uid","locales","globalLocalStore","React","createContext","copyData","source","target","setLocale","currentTask","App","errorHandler","useCallback","msg","setTimeout","setStore","setQuickTasks","setUser","newLocale","getLocale","getQuickTasks","qTasks","onAuthStateChanged","newUser","lang","Provider","component","apps","length","initializeApp","firebaseConfig","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.d5fda397.chunk.js","sourcesContent":["import React, { useContext } from \"react\";\nimport { LocaleContext, LocaleName, UserContext } from \"../App\";\nimport { NavLink } from \"react-router-dom\";\nimport { Button, Col, Container, Nav, Navbar, NavDropdown } from \"react-bootstrap\";\nimport firebase from \"firebase/compat/app\";\n\ninterface MenuProps {\n    changeLocale: (name: LocaleName) => void;\n}\n\nconst Menu = ({ changeLocale }: MenuProps) => {\n    const locale = useContext(LocaleContext);\n    const user = useContext(UserContext);\n\n    const signOut = () => {\n        firebase\n            .auth()\n            .signOut()\n            .then(() => window.location.reload())\n            .catch((err) => {\n                console.error(\"Could not sign out user\", err);\n            });\n    };\n\n    return (\n        <Navbar collapseOnSelect expand=\"lg\">\n            <Container>\n                <NavLink to=\"/\" className=\"navbar-brand\">\n                    Semeru\n                </NavLink>\n                <Navbar.Toggle aria-controls=\"responsive-navbar-nav\" />\n                <Navbar.Collapse id=\"responsive-navbar-nav\">\n                    <Nav className=\"me-auto\">\n                        <NavLink to=\"/\" className=\"nav-link\">\n                            {locale.root.timerPage}\n                        </NavLink>\n                        <NavLink to=\"/settings\" className=\"nav-link\">\n                            {locale.root.settingsPage}\n                        </NavLink>\n                        <NavLink to=\"/stats\" className=\"nav-link\">\n                            {locale.root.dataPage}\n                        </NavLink>\n                        {user ? (\n                            <Col>\n                                <Button variant=\"outline-primary\" onClick={signOut}>\n                                    {locale.auth.signOut}\n                                </Button>\n                            </Col>\n                        ) : (\n                            <NavLink to=\"/sign-in\" className=\"nav-link\">\n                                {locale.auth.signIn}\n                            </NavLink>\n                        )}\n                        <NavDropdown title={locale.root.languages.title} id=\"collasible-nav-dropdown\">\n                            <NavDropdown.Item onClick={() => changeLocale(\"en\")}>\n                                {locale.root.languages.en}\n                            </NavDropdown.Item>\n                            <NavDropdown.Item onClick={() => changeLocale(\"de\")}>\n                                {locale.root.languages.de}\n                            </NavDropdown.Item>\n                        </NavDropdown>\n                    </Nav>\n                </Navbar.Collapse>\n            </Container>\n        </Navbar>\n    );\n};\n\nexport default Menu;\n","export type Collection<T> = {\n    [id: string]: T;\n};\n\nexport interface Task {\n    start: number;\n    name: string;\n    end: number;\n    breaks?: Breaks;\n}\n\nexport interface CurrentTask {\n    start: number;\n    name: string | null;\n    breaks?: Breaks;\n    currentBreakStart?: number;\n}\n\nexport type Breaks = Array<{ start: number; end: number }>;\n\ntype WithBreaks<T> = T & { breaks: Breaks };\n\nexport type CurrentTaskWB = WithBreaks<CurrentTask>;\nexport type TaskWB = WithBreaks<Task>;\n\nexport function withBreaks<T>(value: T): WithBreaks<T> {\n    return {\n        breaks: [],\n        ...value,\n    };\n}\n\nexport function withBreaksArray<T>(array: T[]): Array<WithBreaks<T>> {\n    return array.map((value) => ({\n        breaks: [],\n        ...value,\n    }));\n}\n\nexport function totalCurrentTaskTime(task: CurrentTaskWB): number {\n    const breaks = task.breaks.map((br) => br.end - br.start).reduce((a, b) => a + b, 0);\n    const endTime = task.currentBreakStart || Date.now();\n    return endTime - task.start - breaks;\n}\n\nexport function totalTaskTime(task: TaskWB): number {\n    const breaks = task.breaks.map((br) => br.end - br.start).reduce(add, 0);\n    return task.end - task.start - breaks;\n}\n\nexport interface TaskTime {\n    name: string;\n    time: number;\n}\n\nexport type TaskTimes = TaskTime[];\n\nexport function collectionToArray<T>(collection: Collection<T>): T[] {\n    return Object.values(collection);\n}\n\nexport function timeForTasksSince(tasks: Array<TaskWB>, timeSince: number): TaskTimes {\n    interface TaskTimesObj {\n        [name: string]: TaskTime;\n    }\n\n    const results: TaskTimesObj = {};\n    tasks\n        // only count the time that was actually spent in the requested timeframe\n        .map((task) => ({ ...task, start: Math.max(task.start, timeSince) }))\n        .filter((task) => task.end > timeSince)\n        .forEach((task) => {\n            results[task.name] = results[task.name] ?? {\n                name: task.name,\n                time: 0,\n            };\n            results[task.name].time += totalTaskTime(task);\n        });\n\n    return Object.entries(results)\n        .sort(([, a], [, b]) => b.time - a.time)\n        .map(([name, { time }]) => ({ name, time }));\n}\n\nconst add = (a: number, b: number) => a + b;\n","import React from \"react\";\nimport { Button } from \"react-bootstrap\";\n\nexport type QTask = string;\n\ninterface QuickTaskProps {\n    name: QTask;\n    handler: () => void;\n    highlight?: boolean;\n}\n\nconst QuickTask = ({ highlight, name, handler }: QuickTaskProps) => {\n    return (\n        <Button onClick={handler} variant={highlight ? \"success\" : \"outline-success\"} className=\"m-1\">\n            {name}\n        </Button>\n    );\n};\n\nexport default QuickTask;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { ErrorContext, LocaleContext, StoreContext } from \"../App\";\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\nimport { Collection, collectionToArray, CurrentTask, CurrentTaskWB, totalCurrentTaskTime, withBreaks } from \"../Task\";\nimport QuickTask, { QTask } from \"./QuickTask\";\n\ninterface TimerPageProps {\n    quickTasks: Collection<QTask>;\n}\n\nconst TimerPage = ({ quickTasks }: TimerPageProps) => {\n    const locale = useContext(LocaleContext);\n    const store = useContext(StoreContext);\n    const error = useContext(ErrorContext);\n    const [task, setTask] = useState<CurrentTaskWB | null>(null);\n    const quickTaskArray = collectionToArray(quickTasks);\n\n    useEffect(() => {\n        const listener = (newTask: CurrentTask | null) => setTask(newTask ? withBreaks(newTask) : null);\n        store.getCurrentTask(listener).catch(error(locale.errors.getCurrentTask));\n\n        return () => {\n            store.removeListener(listener).catch(error(locale.errors.getCurrentTask));\n        };\n    }, [locale, error, store]);\n\n    const startHandler = async (name?: string) => {\n        if (!(await stopHandler())) {\n            return;\n        }\n        await store.start(name);\n    };\n\n    const pauseHandler = () => {\n        const next = task && {\n            ...task,\n            currentBreakStart: Date.now(),\n        };\n        store.updateCurrentTask(next).catch(error(locale.errors.updateCurrentTask));\n    };\n\n    const resumeHandler = () => {\n        console.log(task);\n        if (!task?.currentBreakStart) {\n            return task;\n        }\n        const breakEnd = Date.now();\n        const next = {\n            start: task.start,\n            name: task.name || null,\n            breaks: [\n                ...task.breaks,\n                {\n                    start: task.currentBreakStart,\n                    end: breakEnd,\n                },\n            ],\n        };\n        store.updateCurrentTask(next).catch(error(locale.errors.updateCurrentTask));\n\n        // if we block on break name for a long time, everything is still accounted for correctly, since all timestamps have been saved\n        const breakName = window.prompt(locale.timer.enterBreakName);\n        if (breakName) {\n            const newTask = {\n                start: task.currentBreakStart,\n                name: breakName,\n                end: breakEnd,\n                breaks: [],\n            };\n            store.addTask(newTask).catch(error(locale.errors.addTask));\n        }\n    };\n\n    // returns true if the stopping succeeds, and false if it failed\n    const stopHandler = async (): Promise<boolean> => {\n        if (!task) {\n            return true;\n        }\n        let name = task.name;\n        if (!name) {\n            const input = window.prompt(locale.timer.enterLastTaskName);\n            if (!input) {\n                return false;\n            }\n            name = input;\n        }\n        const namedTask = { ...task, name };\n        await store.stop(namedTask).catch(error(locale.errors.addTask));\n        return true;\n    };\n\n    const cancelHandler = async () => {\n        await store.cancel();\n    };\n\n    // whether the current task was started from the quick tasks.\n    // note: this does not show whether a name will need to be entered, since the quick task could have been deleted\n    const anyQuickTaskMatch = !!quickTaskArray.find((qt) => qt === task?.name);\n\n    return (\n        <Col className=\"d-grid justify-content-center\">\n            <Row>\n                {/*<Prompt show onInput={() => {}} text={\"halol\"} />*/}\n                <Container className=\"d-grid justify-content-center\">\n                    <Timer task={task} />\n                </Container>\n                <Container className=\"d-grid justify-content-center\">\n                    <Col>\n                        <Button\n                            variant={anyQuickTaskMatch || !task ? \"outline-success\" : \"success\"}\n                            onClick={() => startHandler()}\n                        >\n                            {locale.timer.start}\n                        </Button>\n                        {task?.currentBreakStart ? (\n                            <Button variant=\"info\" className=\"m-1\" onClick={resumeHandler}>\n                                {locale.timer.resume}\n                            </Button>\n                        ) : (\n                            <Button variant=\"outline-info\" className=\"m-1\" onClick={pauseHandler}>\n                                {locale.timer.pause}\n                            </Button>\n                        )}\n                        <Button variant=\"outline-danger\" onClick={stopHandler}>\n                            {locale.timer.stop}\n                        </Button>\n                        <Button variant=\"outline-danger\" className=\"m-1\" onClick={cancelHandler}>\n                            {locale.timer.cancel}\n                        </Button>\n                    </Col>\n                </Container>\n            </Row>\n            <div className=\"m-3\" />\n            <Row className=\"d-grid justify-content-center\">\n                {quickTaskArray.map((quickTask) => (\n                    <QuickTask\n                        highlight={quickTask === task?.name}\n                        name={quickTask}\n                        handler={() => startHandler(quickTask)}\n                        key={quickTask}\n                    />\n                ))}\n            </Row>\n        </Col>\n    );\n};\n\ninterface TimerProps {\n    task: CurrentTaskWB | null;\n}\n\nconst Timer = (props: TimerProps) => {\n    return (\n        <h1 style={{ fontSize: 60 }}>\n            <TimerInner {...props} />\n        </h1>\n    );\n};\n\nconst TimerInner = ({ task }: TimerProps) => {\n    const [, setRefresh] = useState(0);\n\n    useEffect(() => {\n        if (task) {\n            const i = setInterval(() => {\n                setRefresh((refresh) => refresh + 1);\n            }, 500);\n            return () => clearInterval(i);\n        }\n    }, [task]);\n\n    return <>{task ? formatTime(totalCurrentTaskTime(task)) : \"00:00:00\"}</>;\n};\n\nfunction formatTime(time: number): string {\n    time = time / 1000;\n    const seconds = time % 60;\n    let minutes = time / 60;\n    let hours = 0;\n    if (minutes > 60) {\n        hours = minutes / 60;\n        minutes = minutes % 60;\n    }\n\n    return (\n        `${Math.floor(Math.max(hours, 0)).toString().padStart(2, \"0\")}:` +\n        `${Math.floor(Math.max(minutes, 0)).toString().padStart(2, \"0\")}:` +\n        `${Math.floor(Math.max(seconds, 0)).toString().padStart(2, \"0\")}`\n    );\n}\n\nexport default TimerPage;\n","import React, { useContext } from \"react\";\nimport QuickTask, { QTask } from \"./QuickTask\";\nimport { Button, Col, Container, Row } from \"react-bootstrap\";\nimport { ErrorContext, LocaleContext, StoreContext, UserContext } from \"../App\";\nimport { Collection } from \"../Task\";\n\ninterface SettingsProps {\n    quickTasks: Collection<QTask>;\n    upload: () => void;\n    download: () => void;\n}\n\nconst Settings = ({ quickTasks, upload, download }: SettingsProps) => {\n    const locale = useContext(LocaleContext);\n    const user = useContext(UserContext);\n    const store = useContext(StoreContext);\n    const error = useContext(ErrorContext);\n\n    const newQuickTask = async () => {\n        const task = window.prompt(locale.settings.newTaskMessage);\n        if (!task) {\n            return;\n        }\n        await store.addQuickTask(task).catch(error(locale.errors.addQuickTask));\n    };\n\n    const removeQuickTaskHandler = (id: string) =>\n        store.removeQuickTask(id).catch(error(locale.errors.removeQuickTask));\n\n    return (\n        <Container>\n            <Row>\n                <Row className=\"mb-4\">\n                    <h2>{locale.settings.quickTasks}</h2>\n                    {Object.entries(quickTasks).map(([id, task]) => (\n                        <Row key={id}>\n                            <Col xs={10}>\n                                <QuickTask name={task} handler={() => {}} />\n                                <Button\n                                    className=\"m-1\"\n                                    onClick={() => removeQuickTaskHandler(id)}\n                                    variant=\"outline-danger\"\n                                >\n                                    X\n                                </Button>\n                            </Col>\n                        </Row>\n                    ))}\n                    <Row>\n                        <Col>\n                            <Button variant=\"outline-primary\" className=\"m-1\" onClick={newQuickTask}>\n                                {locale.settings.new}\n                            </Button>\n                        </Col>\n                    </Row>\n                </Row>\n                <Row className=\"mb-4\">\n                    <h2>{locale.settings.synchronizeTitle}</h2>\n                    {user ? (\n                        <Col>\n                            {locale.settings.syncExplain}\n                            <h5>{locale.settings.fromCtoL}</h5>\n                            <Button variant=\"outline-primary\" onClick={upload}>\n                                {locale.settings.upload}\n                            </Button>\n                            <h5 className=\"mt-3\">{locale.settings.fromLtoC}</h5>\n                            <Button variant=\"outline-primary\" onClick={download}>\n                                {locale.settings.download}\n                            </Button>\n                            <h5 className=\"mt-3\">{locale.settings.deleteData}</h5>\n                            <Button variant=\"outline-primary\" onClick={download}>\n                                {locale.settings.delete}\n                            </Button>\n                        </Col>\n                    ) : (\n                        <h5>{locale.settings.mustBeLoggedIn}</h5>\n                    )}\n                </Row>\n            </Row>\n        </Container>\n    );\n};\n\nexport default Settings;\n","import React, { useContext, useEffect, useState } from \"react\";\nimport { ErrorContext, LocaleContext, StoreContext } from \"../App\";\nimport { Button, Col, Container, ListGroup, ListGroupItem, Row } from \"react-bootstrap\";\nimport { Collection, collectionToArray, Task, TaskTimes, timeForTasksSince, withBreaksArray } from \"../Task\";\n\ntype Time = \"day\" | \"week\" | \"month\" | \"all\";\n\nconst times: Time[] = [\"day\", \"week\", \"month\", \"all\"];\n\nconst Stats = () => {\n    const locale = useContext(LocaleContext);\n    const store = useContext(StoreContext);\n    const error = useContext(ErrorContext);\n\n    const [groupedBy, setGroupedBy] = useState<Time>(\"day\");\n\n    const [tasks, setTasks] = useState<TaskTimes>([]);\n\n    useEffect(() => {\n        const listener = (newTasks: Collection<Task>) =>\n            setTasks(timeForTasksSince(withBreaksArray(collectionToArray(newTasks)), toTimestamp(groupedBy)));\n        store.getTasks(listener).catch(error(locale.errors.getTasks));\n\n        return () => {\n            store.removeListener(listener).catch(error(locale.errors.getTasks));\n        };\n    }, [locale, error, store, groupedBy]);\n\n    return (\n        <Container>\n            <div className=\"mb-2\">\n                {times.map((name) => (\n                    <span className=\"m-1\" key={name}>\n                        <Button\n                            variant={groupedBy === name ? \"secondary\" : \"outline-secondary\"}\n                            onClick={() => setGroupedBy(name)}\n                        >\n                            {locale.stats[name]}\n                        </Button>\n                    </span>\n                ))}\n            </div>\n            <ListGroup>\n                {tasks.map((task) => (\n                    <ListGroupItem key={task.name}>\n                        <Container>\n                            <Row>\n                                <Col>{task.name}</Col>\n                                <Col>{formatTimeText(task.time)}</Col>\n                            </Row>\n                        </Container>\n                    </ListGroupItem>\n                ))}\n            </ListGroup>\n        </Container>\n    );\n};\n\nconst toTimestamp = (time: Time): number => {\n    switch (time) {\n        case \"all\":\n            return 0;\n        case \"day\": {\n            const date = new Date();\n            date.setHours(0, 0, 0);\n            return date.getTime();\n        }\n        case \"week\": {\n            const date = new Date();\n            const weekDay = (date.getDay() || 7) - 1;\n            const newDate = date.getDate() - weekDay;\n            date.setDate(newDate);\n            date.setHours(0, 0, 0);\n            return date.getTime();\n        }\n        case \"month\":\n            const date = new Date();\n            date.setDate(1);\n            date.setHours(0, 0, 0);\n            return date.getTime();\n    }\n};\n\nfunction formatTimeText(time: number) {\n    time = time / 1000;\n    const seconds = time % 60;\n    let minutes = time / 60;\n    let hours = 0;\n    if (minutes > 60) {\n        hours = minutes / 60;\n        minutes = minutes % 60;\n    }\n\n    return `${Math.floor(hours)}h ${Math.floor(minutes)}min ${Math.floor(seconds)}s`;\n}\n\nexport default Stats;\n","import React, { useContext, useMemo, useState } from \"react\";\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport { LocaleContext } from \"../App\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport firebase from \"firebase/compat/app\";\nimport { NavLink, useHistory } from \"react-router-dom\";\n\ninterface FormValues {\n    email: string;\n    password: string;\n}\n\nconst SignIn = () => {\n    const locale = useContext(LocaleContext);\n    const [error, setError] = useState<string | null>(null);\n    const history = useHistory();\n\n    const SignInSchema = useMemo(\n        () =>\n            Yup.object().shape({\n                email: Yup.string().email(locale.auth.notAnEmail).required(locale.auth.emailReq),\n                password: Yup.string().required(locale.auth.passwordReq),\n            }),\n        [locale]\n    );\n\n    const firebaseErrors: { [string: string]: string } = useMemo(\n        () => ({\n            \"auth/invalid-email\": locale.auth.notAnEmail,\n            \"auth/user-disabled\": locale.auth.userNotFound,\n            \"auth/user-not-found\": locale.auth.userNotFound,\n            \"auth/wrong-password\": locale.auth.incorrectPassword,\n        }),\n        [locale]\n    );\n\n    const onSubmit = (values: FormValues) => {\n        setError(null);\n        firebase\n            .auth()\n            .signInWithEmailAndPassword(values.email, values.password)\n            .then(() => {\n                setError(null);\n                history.push(\"/\");\n            })\n            .catch((err) => {\n                console.error(err);\n                setError(firebaseErrors[err.code]);\n            });\n    };\n\n    const formik = useFormik({\n        initialValues: { email: \"\", password: \"\" },\n        validationSchema: SignInSchema,\n        onSubmit,\n        validateOnChange: false,\n        validateOnBlur: true,\n    });\n\n    return (\n        <div>\n            <h1>{locale.auth.signIn}</h1>\n            <Form\n                onSubmit={(e) => {\n                    e.preventDefault();\n                    formik.handleSubmit(e);\n                }}\n            >\n                {([\"email\", \"password\"] as [\"email\", \"password\"]).map((fieldName) => (\n                    <Form.Group key={fieldName}>\n                        <Form.Label>{locale.auth[fieldName]}</Form.Label>\n                        <Form.Control\n                            type={fieldName}\n                            name={fieldName}\n                            isInvalid={!!formik.errors[fieldName]}\n                            value={formik.values[fieldName]}\n                            onChange={formik.handleChange}\n                        />\n                        <Alert variant=\"danger\" show={!!formik.errors[fieldName]}>\n                            {formik.errors[fieldName]}\n                        </Alert>\n                    </Form.Group>\n                ))}\n                <Button type=\"submit\">{locale.auth.signIn}</Button>\n                <Alert variant=\"danger\" show={!!error}>\n                    {error}\n                </Alert>\n            </Form>\n            <div>\n                <div>{locale.auth.noAccountYet}</div>\n                <NavLink to=\"/sign-up\">{locale.auth.signUp}</NavLink>\n            </div>\n        </div>\n    );\n};\n\nexport default SignIn;\n","import React, { useContext, useMemo, useState } from \"react\";\nimport { Alert, Button, Form } from \"react-bootstrap\";\nimport { LocaleContext } from \"../App\";\nimport { useFormik } from \"formik\";\nimport * as Yup from \"yup\";\nimport firebase from \"firebase/compat/app\";\nimport { useHistory } from \"react-router-dom\";\n\ninterface FormValues {\n    email: string;\n    password: string;\n    passwordConfirm: string;\n}\n\nconst SignUp = () => {\n    const locale = useContext(LocaleContext);\n    const [error, setError] = useState<string | null>(null);\n    const history = useHistory();\n\n    const SignUpSchema = useMemo(\n        () =>\n            Yup.object().shape({\n                email: Yup.string().email(locale.auth.notAnEmail).required(locale.auth.emailReq),\n                password: Yup.string().required(locale.auth.passwordReq),\n                passwordConfirm: Yup.string()\n                    .required(locale.auth.passwordReq)\n                    .min(6, locale.auth.passwordLength)\n                    .oneOf([Yup.ref(\"password\")], locale.auth.passwordMustMatch),\n            }),\n        [locale]\n    );\n\n    const firebaseErrors: { [string: string]: string } = useMemo(\n        () => ({\n            \"auth/invalid-email\": locale.auth.notAnEmail,\n            \"auth/email-already-in-use\": locale.auth.emailAlreadyInUse,\n            \"auth/weak-password\": locale.auth.weakPassword,\n        }),\n        [locale]\n    );\n\n    const onSubmit = (values: FormValues) => {\n        setError(null);\n        firebase\n            .auth()\n            .createUserWithEmailAndPassword(values.email, values.password)\n            .then(() => {\n                setError(null);\n                history.push(\"/\");\n            })\n            .catch((err) => {\n                console.error(err);\n                setError(firebaseErrors[err.code]);\n            });\n    };\n\n    const formik = useFormik({\n        initialValues: { email: \"\", password: \"\", passwordConfirm: \"\" },\n        validationSchema: SignUpSchema,\n        onSubmit,\n        validateOnChange: false,\n        validateOnBlur: true,\n    });\n\n    return (\n        <div>\n            <h1>{locale.auth.signUp}</h1>\n            <p>{locale.auth.accountInfo}</p>\n            <Form\n                onSubmit={(e) => {\n                    e.preventDefault();\n                    formik.handleSubmit(e);\n                }}\n            >\n                {([\"email\", \"password\", \"passwordConfirm\"] as [\"email\", \"password\", \"passwordConfirm\"]).map(\n                    (fieldName) => (\n                        <Form.Group key={fieldName}>\n                            <Form.Label>{locale.auth[fieldName]}</Form.Label>\n                            <Form.Control\n                                type={fieldName}\n                                name={fieldName}\n                                isInvalid={!!formik.errors[fieldName]}\n                                value={formik.values[fieldName]}\n                                onChange={formik.handleChange}\n                            />\n                            <Alert variant=\"danger\" show={!!formik.errors[fieldName]}>\n                                {formik.errors[fieldName]}\n                            </Alert>\n                        </Form.Group>\n                    )\n                )}\n                <Button type=\"submit\">{locale.auth.signIn}</Button>\n                <Alert variant=\"danger\" show={!!error}>\n                    {error}\n                </Alert>\n            </Form>\n        </div>\n    );\n};\n\nexport default SignUp;\n","import { Collection, CurrentTask, Task } from \"../Task\";\nimport { QTask } from \"../components/QuickTask\";\nimport { LocaleName } from \"../App\";\n\nexport type Listener<T> = (values: T) => void;\n\nexport type CurrentTaskWithName = CurrentTask & { name: string };\nexport type PropertyName = \"tasks\" | \"currentTask\" | \"quickTasks\" | \"locale\";\n\nexport default abstract class Store {\n    public async start(name?: string): Promise<void> {\n        const task: CurrentTask = {\n            name: name || null, // firebase does not like undefined\n            start: Date.now(),\n            breaks: [],\n        };\n        await this.set(\"currentTask\", task);\n    }\n\n    public async stop({ start, name, breaks }: CurrentTaskWithName): Promise<void> {\n        const end = Date.now();\n        const newTask: Task = {\n            start,\n            end,\n            breaks,\n            name,\n        };\n\n        await Promise.all([this.addTask(newTask), this.set(\"currentTask\", null)]);\n    }\n\n    public async clear(): Promise<void> {\n        await this.set(\"tasks\", {});\n        await this.set(\"currentTask\", {});\n        await this.set(\"quickTasks\", {});\n        await this.set(\"locale\", \"en\");\n    }\n\n    public async addTask(task: Task): Promise<void> {\n        await this.push(\"tasks\", task);\n    }\n\n    public async cancel() {\n        await this.set(\"currentTask\", null);\n    }\n\n    public async updateCurrentTask(task: CurrentTask | null) {\n        await this.set(\"currentTask\", task);\n    }\n\n    public async setLocale(name: LocaleName) {\n        await this.set(\"locale\", name);\n    }\n\n    public async addQuickTask(task: QTask) {\n        await this.push(\"quickTasks\", task);\n    }\n\n    public getTasks(listener: Listener<Collection<Task>>): Promise<void> {\n        return this.get(\"tasks\", {}, listener);\n    }\n\n    public getQuickTasks(listener: Listener<Collection<QTask>>): Promise<void> {\n        return this.get(\"quickTasks\", {}, listener);\n    }\n\n    public getLocale(listener: Listener<LocaleName>): Promise<void> {\n        return this.get(\"locale\", \"en\", listener);\n    }\n\n    public getCurrentTask(listener: Listener<CurrentTask | null>): Promise<void> {\n        return this.get(\"currentTask\", null, listener);\n    }\n\n    public abstract removeQuickTask(id: string): Promise<void>;\n\n    public abstract removeListener(listener: Listener<any>): Promise<void>;\n\n    /**\n     * Only use this if realtime-reloading is explicitly *not* wanted\n     */\n    public abstract getOnce<T>(name: PropertyName, defaultValue: T): Promise<T>;\n\n    protected abstract get<T>(name: PropertyName, defaultValue: T, listener: Listener<T>): Promise<void>;\n\n    protected abstract set<T>(name: PropertyName, value: T): Promise<void>;\n\n    protected abstract push<T>(name: PropertyName, value: T): Promise<void>;\n}\n","import { Collection, collectionToArray } from \"../Task\";\nimport Store, { Listener, PropertyName } from \"./Store\";\nimport { QTask } from \"../components/QuickTask\";\n\nexport default class LocalStore extends Store {\n    _listeners: Array<{ value: PropertyName; listener: Listener<any>; defaultValue: any }> = [];\n\n    public async getOnce<T>(name: PropertyName, defaultValue: T): Promise<T> {\n        const item = localStorage.getItem(name);\n        if (!item) {\n            return defaultValue;\n        }\n        return JSON.parse(item);\n    }\n\n    async set<T>(name: PropertyName, newValue: T) {\n        const string = JSON.stringify(newValue);\n        localStorage.setItem(name, string);\n        this._listeners\n            .filter(({ value }) => value === name)\n            .forEach(({ listener, defaultValue }) => listener(newValue || defaultValue));\n    }\n\n    public async removeQuickTask(id: string): Promise<void> {\n        const tasks = await this.getOnce<Collection<QTask>>(\"quickTasks\", {});\n        delete tasks[id];\n        await this.set(\"quickTasks\", tasks);\n    }\n\n    public async removeListener(toRemove: Listener<any>): Promise<void> {\n        this._listeners = this._listeners.filter(({ listener }) => listener !== toRemove);\n    }\n\n    public pushAll<T>(name: PropertyName, value: Collection<T>) {\n        this.set(name, collectionToArray(value)).then();\n    }\n\n    protected async push<T>(name: PropertyName, value: T): Promise<void> {\n        const id = `id${Date.now()}_${Math.floor(Math.random() * 1000)}`; // very very cool id\n        const values = await this.getOnce<Collection<T>>(name, {});\n        values[id] = value;\n        await this.set(name, values);\n    }\n\n    protected async get<T>(value: PropertyName, defaultValue: T, listener: Listener<T>): Promise<void> {\n        this._listeners.push({ value, listener, defaultValue });\n        listener(await this.getOnce(value, defaultValue));\n    }\n}\n","import Store, { Listener, PropertyName } from \"./Store\";\nimport firebase from \"firebase/compat/app\";\n\ntype FirebaseListener = (a: firebase.database.DataSnapshot, b?: string | null) => any;\n\nexport default class CloudStore extends Store {\n    _user: firebase.User;\n    // we need to map our listeners to firebase listeners, because we cannot use firebase listeners directly,\n    // because the LocalStore cannot call firebase listeners.\n    // we need to store the firebase listeners here, because we need to be able to remove them later\n    _listenerMap: Map<Listener<any>, { name: PropertyName; listener: FirebaseListener }>;\n\n    constructor(user: firebase.User) {\n        super();\n        this._user = user;\n        this._listenerMap = new Map();\n    }\n\n    public async removeListener(listener: Listener<any>): Promise<void> {\n        const firebaseListener = this._listenerMap.get(listener);\n        if (!firebaseListener) {\n            return;\n        }\n        firebase.database().ref(this.path(firebaseListener.name)).off(\"value\", firebaseListener.listener);\n    }\n\n    public async removeQuickTask(id: string): Promise<void> {\n        await firebase\n            .database()\n            .ref(`${this.path(\"quickTasks\")}/${id}`)\n            .set(null);\n    }\n\n    public getOnce<T>(name: PropertyName, defaultValue: T): Promise<T> {\n        return firebase\n            .database()\n            .ref(this.path(name))\n            .get()\n            .then((val) => val.val());\n    }\n\n    protected async set<T>(name: PropertyName, value: T): Promise<void> {\n        await firebase.database().ref(this.path(name)).set(value);\n    }\n\n    protected async push<T>(name: PropertyName, value: T): Promise<void> {\n        firebase.database().ref(this.path(name)).push(value);\n    }\n\n    protected async get<T>(name: PropertyName, defaultValue: T, listener: Listener<T>): Promise<void> {\n        const firebaseListener: FirebaseListener = (data) => listener(data.val() || defaultValue);\n        this._listenerMap.set(listener, { name, listener: firebaseListener });\n        firebase.database().ref(this.path(name)).on(\"value\", firebaseListener);\n    }\n\n    private path(name: string): string {\n        return `users/${this._user.uid}/${name}`;\n    }\n}\n","import React, { useCallback, useEffect, useState } from \"react\";\nimport { HashRouter, Route, Switch } from \"react-router-dom\";\nimport firebase from \"firebase/compat/app\";\nimport { QTask } from \"./components/QuickTask\";\nimport Menu from \"./components/Menu\";\nimport TimerPage from \"./components/TimerPage\";\nimport Settings from \"./components/Settings\";\nimport Stats from \"./components/Stats\";\nimport SignIn from \"./components/SignIn\";\nimport SignUp from \"./components/SignUp\";\nimport Store from \"./store/Store\";\nimport LocalStore from \"./store/LocalStore\";\nimport CloudStore from \"./store/CloudStore\";\nimport { Collection, collectionToArray, CurrentTask, Task } from \"./Task\";\nimport de from \"./locale/de.json\";\nimport en from \"./locale/en2.json\";\nimport { Alert } from \"react-bootstrap\";\n\nexport type ErrorHandler = (msg: string) => (err: any) => void;\n\ntype Locale = typeof de;\ntype LocaleName = \"en\" | \"de\";\n\ntype Locales = {\n    [name in LocaleName]: Locale;\n};\n\nconst locales: Locales = {\n    de,\n    en,\n};\n\nconst globalLocalStore = new LocalStore();\n\nconst LocaleContext = React.createContext(en);\nconst UserContext = React.createContext<firebase.User | null>(null);\nconst StoreContext = React.createContext<Store>(globalLocalStore);\nconst ErrorContext = React.createContext<ErrorHandler>(() => () => {});\n\nconst App = () => {\n    const errorHandler = useCallback(\n        (msg: string) => (err: any) => {\n            console.error(msg, err);\n            setError(msg);\n            setTimeout(() => setError(null), 3000);\n        },\n        []\n    );\n\n    const [locale, setLocale] = useState<Locale>(en);\n    const [store, setStore] = useState<Store>(globalLocalStore);\n    const [quickTasks, setQuickTasks] = useState<Collection<QTask>>({});\n    const [user, setUser] = useState<firebase.User | null>(null);\n    const [error, setError] = useState<string | null>(null);\n\n    useEffect(() => {\n        const listener = (newLocale: LocaleName) => setLocale(locales[newLocale]);\n        store.getLocale(listener).catch();\n\n        return () => {\n            store.removeListener(listener).catch(errorHandler(locale.errors.getQuickTasks));\n        };\n    }, [locale, errorHandler, store]);\n\n    useEffect(() => {\n        const listener = (qTasks: Collection<QTask>) => setQuickTasks(qTasks);\n        store.getQuickTasks(listener).catch(errorHandler(locale.errors.getQuickTasks));\n\n        return () => {\n            store.removeListener(listener).catch(errorHandler(locale.errors.getQuickTasks));\n        };\n    }, [locale, errorHandler, store]);\n\n    useEffect(() => {\n        firebase.auth().onAuthStateChanged((newUser) => {\n            setUser(newUser);\n            if (!newUser) {\n                setStore(globalLocalStore);\n            } else {\n                setStore(new CloudStore(newUser));\n            }\n        });\n    }, []);\n\n    const changeLocale = (name: LocaleName) => store.setLocale(name).catch(errorHandler(locale.errors.setLocale));\n\n    return (\n        <div lang={locale.name}>\n            <HashRouter>\n                <LocaleContext.Provider value={locale}>\n                    <UserContext.Provider value={user}>\n                        <StoreContext.Provider value={store}>\n                            <ErrorContext.Provider value={errorHandler}>\n                                <Menu changeLocale={changeLocale} />\n                                <Switch>\n                                    <Route path=\"/settings\">\n                                        <Settings\n                                            quickTasks={quickTasks}\n                                            upload={() => copyData(globalLocalStore, store)}\n                                            download={() => copyData(store, globalLocalStore)}\n                                        />\n                                    </Route>\n                                    <Route path=\"/stats\">\n                                        <Stats />\n                                    </Route>\n                                    <Route path=\"/sign-in\" component={SignIn} />\n                                    <Route path=\"/sign-up\" component={SignUp} />\n                                    <Route path=\"/\">\n                                        <TimerPage quickTasks={quickTasks} />\n                                    </Route>\n                                </Switch>\n                                <footer>\n                                    <Alert variant=\"danger\" show={!!error}>\n                                        {error}\n                                    </Alert>\n                                </footer>\n                            </ErrorContext.Provider>\n                        </StoreContext.Provider>\n                    </UserContext.Provider>\n                </LocaleContext.Provider>\n            </HashRouter>\n        </div>\n    );\n};\n\nconst copyData = async (source: Store, target: Store) => {\n    await source\n        .getOnce<Collection<Task>>(\"tasks\", {})\n        .then((tasks) => collectionToArray(tasks).forEach((task) => target.addTask(task)));\n\n    await source.getOnce<LocaleName>(\"locale\", \"en\").then((locale) => target.setLocale(locale));\n\n    await source\n        .getOnce<Collection<QTask>>(\"quickTasks\", {})\n        .then((quickTasks) => collectionToArray(quickTasks).forEach((quickTask) => target.addQuickTask(quickTask)));\n\n    await source\n        .getOnce<CurrentTask | null>(\"currentTask\", null)\n        .then((currentTask) => target.updateCurrentTask(currentTask));\n};\n\nexport default App;\nexport { LocaleContext, UserContext, StoreContext, ErrorContext };\nexport type { LocaleName };\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\nimport \"bootstrap/dist/css/bootstrap.min.css\";\nimport firebaseConfig from \"./firebaseConfig.json\";\nimport firebase from \"firebase/compat/app\";\nimport \"firebase/compat/auth\";\nimport \"firebase/compat/database\";\n\nif (firebase.apps.length === 0) {\n    firebase.initializeApp(firebaseConfig);\n}\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}